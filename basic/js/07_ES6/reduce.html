<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JS reduce()</title>
  </head>
  <body>
    <script>
      // `reduce()`는 **배열의 모든 요소를 순회하며 하나의 값으로 누적**하는 메서드입니다.
      //합계, 평균, 객체 변환, JSX 누적 렌더링 등 다양하게 활용됩니다.

      /* 
        arr.reduce((누적값, 현재값, 인덱스, 원본배열) => {
            // 실행 로직
                return 새로운누적값;
            }, 초기값);
       */

      const numbers = [1, 2, 3, 4];
       // 배열.reduce(콜백함수, 초기값);
        /* 
            배열.reduce((누적값, 현재값) => 값, 0); 
            -> {return 값;} -> 값
        */
      const sum = numbers.reduce((acc, cur) => acc + cur, 0);
      console.log(sum); // 10

      // 배열 내에 중복 요소 개수 세기~ 
      const fruits = ["apple", "banana", "apple", "orange", "banana"];

      const count = fruits.reduce((acc, fruit) => {
        //앞의 값이 “truthy”면 → 앞값을 그대로 반환
        //앞이 falsy이면 → 뒤 값을 반환
        acc[fruit] = (acc[fruit] || 0) + 1;
        //acc[cur]은 속성이름이 cur의 값으로 정해진다
        //예)acc['apple']=1 -> {apple:1}
        return acc;
      }, {});

      console.log(count);
      // { apple: 2, banana: 2, orange: 1 }

      // 2차원 배열 → 1차원 배열(평탄화):reduce+concat
      const arr = [[1, 2], [3, 4], [5]];
      const flat = arr.reduce((acc, cur) => acc.concat(cur), []);
      console.log(flat); // [1, 2, 3, 4, 5]

      //React 장바구니 합계[객체배열]
      const cart = [
        { name: "Keyboard", price: 30000, qty: 2 },
        { name: "Mouse", price: 15000, qty: 1 },
      ];

      const total = cart.reduce((sum, item) => 
      sum + item.price * item.qty, 0);
      console.log(total); // 75000
    </script>
  </body>
</html>
